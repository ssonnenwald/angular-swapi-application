<h2 class="mt-0">{{ resource() | titlecase }} Search</h2>

<mat-form-field appearance="outline">
  <mat-label>Search term</mat-label>
  <input matInput [(ngModel)]="searchTerm" (keyup.enter)="onSearch()" />
</mat-form-field>

<button mat-raised-button class="ms-3" color="primary" (click)="onSearch()">
  Search
</button>

@if(data().length > 0) {
<mat-table [dataSource]="data()" class="mat-elevation-z8">
  @for(column of columnDefs(); track $index) {
  <!-- Dynamic Column Definitions -->
  <ng-container [matColumnDef]="column.columnDef">
    <mat-header-cell *matHeaderCellDef>{{
      column.header | titlecase
    }}</mat-header-cell>
    <mat-cell *matCellDef="let row">
      {{ column.cell(row) }}
    </mat-cell>
  </ng-container>
  }

  <mat-header-row *matHeaderRowDef="displayedColumns()"></mat-header-row>
  <mat-row *matRowDef="let row; columns: displayedColumns()"></mat-row>

  @if(searchTerm().length > 0) {
  <!-- Row shown when there is no matching data. -->
  <tr class="mat-row" *matNoDataRow>
    <td class="mat-cell" colspan="4">
      No data matching the filter "{{ searchTerm() }}"
    </td>
  </tr>
  }
</mat-table>
}
